<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2 Лекция: Требования безопасности к серверам баз данных. Классы защиты</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.5;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .definition {
            margin-bottom: 20px;
        }
        
        .term {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .description {
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <h1>2 Лекция: Требования безопасности к серверам баз данных. Классы защиты</h1>

    <p><strong>Цель:</strong> Сформировать системное понимание угроз безопасности СУБД и выработать практические навыки по их защите на разных уровнях.</p>

    <p><strong>Ключевой тезис:</strong> База данных — это «золотой фонд» компании. Её компрометация ведет к катастрофическим последствиям: утечке персональных данных, финансовым потерям, репутационному ущербу и административным штрафам. Безопасность БД — это не «фича», а обязательная базовая функция.</p>

    <h2>Введение: Почему безопасность БД — это важно?</h2>

    <ol>
        <li><strong>Ценность данных:</strong> БД хранят ПДн, финансовую отчетность, коммерческую тайну, интеллектуальную собственность.</li>
        <li><strong>Последствия взлома:</strong>
            <ul>
                <li><strong>Прямые убытки:</strong> Кража денег, штрафы по GDPR, КоАП, PCI DSS.</li>
                <li><strong>Репутационные потери:</strong> Утрата доверия клиентов и партнеров.</li>
                <li><strong>Операционные потери:</strong> Остановка бизнес-процессов, шантаж (ransomware).</li>
            </ul>
        </li>
    </ol>

    <h2>Часть 1: Многоуровневая модель безопасности (Defense in Depth)</h2>

    <p>Защита должна быть многослойной, как замок с несколькими дверьми.</p>

    <h3>1. Уровень сети (Network Security)</h3>

    <ul>
        <li><strong>Принцип:</strong> «Спрятать» СУБД от всего мира.</li>
        <li><strong>Меры:</strong>
            <ul>
                <li><strong>Изоляция:</strong> Размещение БД в отдельном, изолированном сегменте сети (DMZ, VLAN). <strong>Никаких прямых подключений из интернета.</strong></li>
                <li><strong>Firewall (Брандмауэр):</strong>
                    <ul>
                        <li><strong>Хостый:</strong> iptables (Linux), Windows Firewall.</li>
                        <li><strong>Сетевой:</strong> Правила, разрешающие входящие подключения <strong>только</strong> с конкретных IP-адресов application-серверов (принцип наименьших привилегий на сетевом уровне).</li>
                        <li><strong>Запрет</strong> всех неиспользуемых портов.</li>
                    </ul>
                </li>
                <li><strong>Шифрование трафика:</strong> Использование SSL/TLS для соединений между приложением и БД. Защита от сниффинга (перехвата тракта).</li>
            </ul>
        </li>
    </ul>

    <h3>2. Уровень доступа к серверу (Host Security)</h3>

    <ul>
        <li><strong>Принцип:</strong> Укрепить ОС, на которой работает СУБД.</li>
        <li><strong>Меры:</strong>
            <ul>
                <li><strong>Минимизация поверхности атаки:</strong> Удаление всех ненужных пакетов, служб, отключение неиспользуемых портов.</li>
                <li><strong>Своевременное обновление:</strong> Регулярный патчинг ОС и СУБД для устранения известных уязвимостей.</li>
                <li><strong>Дисковая шифровка:</strong> Full-disk encryption (e.g., LUKS, BitLocker) для защиты данных на физическом носителе.</li>
                <li><strong>Отдельный пользователь ОС:</strong> Запуск СУБД от имени непривилегированного пользователя (не root!).</li>
            </ul>
        </li>
    </ul>

    <h3>3. Уровень доступа к СУБД (Database Access Control)</h3>

    <ul>
        <li><strong>Принцип:</strong> Аутентификация и авторизация.</li>
        <li><strong>Меры:</strong>
            <ul>
                <li><strong>Сильные пароли:</strong> Политика сложности паролей, регулярная смена.</li>
                <li><strong>Отказ от учетных записей по умолчанию:</strong> Переименование или блокировка root/sa/postgres.</li>
                <li><strong>Принцип наименьших привилегий (Least Privilege):</strong> Пользователь/приложение получает ровно те права, которые нужны для работы, и не более.
                    <ul>
                        <li><em>Пример:</em> Пользователю для веб-приложения не нужны права CREATE TABLE, DROP, GRANT OPTION.</li>
                    </ul>
                </li>
                <li><strong>Разделение обязанностей (SoD):</strong> Администратор БД, администратор безопасности, оператор резервного копирования — должны быть разные люди/учетные записи.</li>
            </ul>
        </li>
    </ul>

    <h3>4. Уровень данных (Data Security)</h3>

    <ul>
        <li><strong>Принцип:</strong> Защита данных даже при компрометации вышележащих уровней.</li>
        <li><strong>Меры:</strong>
            <ul>
                <li><strong>Шифрование данных:</strong>
                    <ul>
                        <li><strong>Transparent Data Encryption (TDE):</strong> Шифрование «на лету» на уровне табличного пространства/файлов БД. Защищает от кражи файлов данных.</li>
                        <li><strong>Шифрование на уровне столбца (Column-level Encryption):</strong> Для особо чувствительных данных (пароли, номера карт). Данные шифруются при записи и расшифровываются при чтении с помощью ключа.</li>
                    </ul>
                </li>
                <li><strong>Маскирование данных (Data Masking):</strong> Для тестовых и сред разработки. Реальные данные заменяются на правдоподобные фиктивные.</li>
                <li><strong>Хэширование:</strong> Для хранения паролей <strong>обязательно</strong> использовать современные алгоритмы хэширования с солью (bcrypt, scrypt, Argon2). <strong>Никогда не хранить пароли в открытом виде!</strong></li>
            </ul>
        </li>
    </ul>

    <h3>5. Уровень аудита и мониторинга (Auditing & Monitoring)</h3>

    <ul>
        <li><strong>Принцип:</strong> Обнаружение и расследование инцидентов.</li>
        <li><strong>Меры:</strong>
            <ul>
                <li><strong>Включение ведения логов:</strong> Логирование всех попыток входа (успешных и неуспешных), попыток доступа к бд, изменений схемы БД.</li>
                <li><strong>Centralized Logging:</strong> Отправка логов на выделенный сервер (лог-сервер) для защиты от модификации злоумышленником.</li>
                <li><strong>SIEM-системы:</strong> Использование систем для анализа логов и выявления аномалий (например, 1000 попыток входа за минуту с одного IP).</li>
                <li><strong>Регулярный аудит:</strong> Проверка настроек безопасности, прав пользователей.</li>
            </ul>
        </li>
    </ul>

    <h2>Часть 2: Классы защиты / Стандарты безопасности (Security Standards)</h2>

    <p>Это формализованные требования, которые предъявляются к системам в зависимости от важности обрабатываемых данных.</p>

    <table>
        <tr>
            <th>Стандарт / Регламент</th>
            <th>Сфера применения</th>
            <th>Ключевые требования к БД</th>
        </tr>
        <tr>
            <td><strong>ФСТЭК России</strong><br>(Приказы № 21, 31, 239)</td>
            <td>Защита информации в ГИС (гос. информационных системах).<br>Определяет <strong>классы защищенности (КЗ1-КЗ4)</strong>.</td>
            <td><strong>КЗ1 (самый высокий):</strong><br>• Аудит всех событий безопасности.<br>• Мандатное управление доступом (МСВ).<br>• Визуальная изоляция данных разных уровней конфиденциальности.<br>• Сертифицированные СЗИ.</td>
        </tr>
        <tr>
            <td><strong>152-ФЗ «О персональных данных»</strong></td>
            <td>Любые операторы, обрабатывающие ПДн граждан РФ. Уровни защищенности (высокий, средний, базовый).</td>
            <td>• Шифрование ПДн при передаче и хранении.<br>• Разграничение прав доступа.<br>• Учет и хранение машинных носителей.<br>• Обнаружение вторжений.</td>
        </tr>
        <tr>
            <td><strong>PCI DSS</strong><br>(Payment Card Industry)</td>
            <td>Организации, работающие с банковскими картами.</td>
            <td>• Шифрование данных картодержателей (CHD).<br>• Защита от SQL-инъекций.<br>• Строгое управление доступом.<br>• Регулярное тестирование систем.</td>
        </tr>
        <tr>
            <td><strong>GDPR</strong><br>(General Data Protection Regulation)</td>
            <td>Любые компании, обрабатывающие ПДн граждан ЕС.</td>
            <td>• Privacy by Design (защита на этапе проектирования).<br>• Минимизация данных (хранить только необходимое).<br>• Уведомление о утечках в течение 72 часов.</td>
        </tr>
        <tr>
            <td><strong>ISO/IEC 27001</strong></td>
            <td>Международный стандарт системы менеджмента информационной безопасности (СМИБ).</td>
            <td>• Системный подход к управлению рисками.<br>• Постоянное улучшение (цикл PDCA).<br>• Документирование политик и процедур.</td>
        </tr>
    </table>

    <h2>Практические выводы и checklist</h2>

    <div class="checklist">
        <ol>
            <li><strong>[ ] Изолируйте</strong> сервер БД от интернета.</li>
            <li><strong>[ ] Настройте</strong> firewall для white-listing IP-адресов application-серверов.</li>
            <li><strong>[ ] Обновляйте</strong> ОС и СУБД регулярно.</li>
            <li><strong>[ ] Запретите/смените</strong> пароли учетных записей по умолчанию.</li>
            <li><strong>[ ] Создавайте</strong> отдельных пользователей для каждого приложения с <strong>минимальными правами</strong>.</li>
            <li><strong>[ ] Включайте</strong> шифрование (TDE) и SSL/TLS для соединений.</li>
            <li><strong>[ ] Хэшируйте</strong> пароли с помощью bcrypt/Argon2.</li>
            <li><strong>[ ] Включайте</strong> логирование и настройте мониторинг подозрительной активности.</li>
            <li><strong>[ ] Регулярно</strong> делайте бэкапы и тестируйте их восстановление.</li>
            <li><strong>[ ] Проводите</strong> регулярный аудит безопасности (например, с помощью сканеров уязвимостей).</li>
        </ol>
    </div>

    <h2>Итог:</h2>

    <p>Безопасность БД — это непрерывный процесс, а не разовое действие. Она требует комплексного подхода, покрывает все уровни: от физического до уровня приложений, и должна быть основана на принципах «запрещено всё, что не разрешено явно» и «минимум привилегий».</p>
</body>
</html>